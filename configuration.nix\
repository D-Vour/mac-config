{ config, pkgs, ... }:

let
  username = "mac";                             # <-- your macOS user
  braveWithPass = pkgs.brave.override {
    extensions = [ pkgs.chromiumExtensions.proton-pass ];
  };
in
{
  # required once, then never change
  system.stateVersion = 6;
  system.primaryUser  = username;

  # basic OS + nix
  users.users.${username}.home = "/Users/${username}";
  networking.hostName         = "macbook";
  nix.enable                  = true;
  nix.settings.experimental-features = [ "nix-command" "flakes" ];

  # default shell
  programs.zsh.enable = true;

  # install Brave (w/ Proton Pass) via Nix
  environment.systemPackages = [ braveWithPass ];

  # Homebrew for GUI casks (Proton VPN)
  homebrew = {
    enable         = true;
    global.brewfile = true;          # lets nix-darwin call `brew bundle`
    brews  = [ ];                    # no formulae
    casks  = [
      "protonvpn"
    ];
  };
}

